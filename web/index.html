<!DOCTYPE html>
<!--
An example web page that creates and displays a custom Google Maps API Map Type
for Earth Engine map tiles.  See Google Maps documentation on Custom Map Types
for details.
-->
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    
    <title>Analysis of water datasets for Murray & Darling Basin, Australia</title>

    <!-- Load the Google Maps API. -->
    <script src="https://maps.google.com/maps/api/js?sensor=false"></script>

    <!-- Load our JavaScript file. -->
    <script src="/static/script.js"></script>

    <!-- Load compiled Earth Engine JavaScript client library. -->
    <script src="/static/ee_api_js.js"></script>

    <script src="/static/ExtDraggableObject.js"></script>
    <script src="/static/CustomTileOverlay.js"></script>

    <style type="text/css">
       html { height: 100% }
       body { height: 100%; margin: 0px; padding: 0px }
       #map { height: 100% }
     </style>
  </head>
  <body>
    <!-- The element into which we render the Google Map. -->
    <div id="map"></div>

    <!-- Boot our application once the body loads. -->
    <script>
      /**
       * Here we get the mapid and token for the map tiles that were generated
       * by Earth Engine using the Python script server.py and injected using
       * the Jinja2 templating engine.
       */

      var client_id = '{{ client_id }}';
      var token_type = '{{ token_type }}';
      var access_token = '{{ access_token }}';
      var token_expires_in_sec = '{{ token_expires_in_sec }}';
      var expire_time = '{{ token_expire_time }}';

      console.log(access_token);
      console.log(token_expires_in_sec);
      console.log(expire_time);

      ee.data.setAuthToken('{{ client_id }}', '{{ token_type }}', '{{ access_token }}', '{{ token_expires_in_sec }}');

      ee.initialize();

      initialize();
    </script>
  </body>
</html>
